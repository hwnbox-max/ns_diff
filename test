# Neuro-Symbolic Diffusion (NS-Diff) å®Œæ•´å®ç°è¿‡ç¨‹è®°å½•


### âœ… æ ¸å¿ƒæ¨¡å— (10ä¸ªæ–‡ä»¶)

1. requirements.txt - å®Œæ•´çš„ä¾èµ–åŒ…åˆ—è¡¨
2. models/ns_diff.py - NS-Diffæ ¸å¿ƒå®ç° (5ä¸ªç±»,500+è¡Œ)
   - DiffusionEncoder, SMA, DNSL, DiffusionDecoder, NSDiff
3. models/baselines.py - 4ä¸ªåŸºçº¿æ¨¡å‹å®ç°
   - ResNet-50, Standard CBM, Post-hoc CBM, DisDiff-FNNC
4. data/datasets.py - æ•°æ®é›†åŠ è½½å™¨
   - Shapes3D, CelebA-HQ
5. train.py - ç»Ÿä¸€è®­ç»ƒè„šæœ¬ (400+è¡Œ)
6. evaluation/metrics.py - è¯„ä¼°æŒ‡æ ‡
   - MIG, ISR, SAP, Modularity
7. evaluation/visualization.py - å¯è§†åŒ–å·¥å…·
   - åäº‹å®å¯¹æ¯”, æ€§èƒ½å¯¹æ¯”å›¾, æµå½¢å¯è§†åŒ–
8. experiments/run_all_experiments.py - å®Œæ•´å®éªŒå¥—ä»¶
9. experiments/config.json - å®éªŒé…ç½®
10. test_installation.py - å®‰è£…æµ‹è¯•è„šæœ¬

### ğŸ¯ å…³é”®ç‰¹æ€§

#### 1. å®Œæ•´å®ç°Algorithm 1
```python
# Phase 1: Manifold Perception
z = encoder(x)

# Phase 2: Semantic Projection with Jacobian Orthogonality
c = sma(z)
L_ortho = compute_jacobian_orthogonality_loss(z, c)

# Phase 3: Differentiable Logic (Product T-Norm)
mu = fuzzify(c)  # Eq. 2
alpha = product_tnorm(mu)  # Eq. 3
y_hat = softmax(W_rule @ alpha)  # Eq. 5

# Phase 4: End-to-End Optimization
L_total = lambda_cls * L_cls + lambda_ortho * L_ortho

# Phase 5: Generative Verification
if iteration % N_check == 0:
    x_cf = generate_counterfactual(x, concept_idx, value)
```

#### 2. æ•°å­¦å…¬å¼ç²¾ç¡®å®ç°
- âœ… Eq. 1: Jacobianæ­£äº¤æ­£åˆ™åŒ– (äºŒé˜¶æ¢¯åº¦)
- âœ… Eq. 2: é«˜æ–¯éš¶å±å‡½æ•° (å¯å­¦ä¹ å‚æ•°)
- âœ… Eq. 3: Product T-Norm (ä¿è¯æ¢¯åº¦æµ)
- âœ… Eq. 4: æ¢¯åº¦æµåˆ†æ
- âœ… Eq. 5: Softmaxå»æ¨¡ç³ŠåŒ–

#### 3. è¯¦ç»†ä»£ç æ³¨é‡Š
- æ¯ä¸ªå‡½æ•°éƒ½æœ‰å®Œæ•´çš„docstring
- å…³é”®ç®—æ³•æ­¥éª¤éƒ½æœ‰ä¸­æ–‡æ³¨é‡Š
- å¼•ç”¨è®ºæ–‡çš„å…¬å¼ç¼–å·

#### 4. å®Œæ•´å®éªŒæ”¯æŒ
- âœ… 5ä¸ªæ¨¡å‹çš„è®­ç»ƒè„šæœ¬
- âœ… è‡ªåŠ¨åŒ–å®éªŒæµç¨‹
- âœ… ç»“æœå¯è§†åŒ–å’ŒLaTeXè¡¨æ ¼ç”Ÿæˆ
- âœ… TensorBoardé›†æˆ

### ğŸ“Š å¤ç°è®ºæ–‡ç»“æœ


### ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# 1. å®‰è£…
pip install -r requirements.txt
python test_installation.py

# 2. å‡†å¤‡æ•°æ®
# ä¸‹è½½CelebA-HQå’ŒShapes3D

# 3. è®­ç»ƒNS-Diff
python train.py --model ns_diff --dataset celeba-hq \
    --data_path /path/to/data --epochs 100

# 4. è¿è¡Œå®Œæ•´å®éªŒ
python experiments/run_all_experiments.py
```

### ğŸ“– æ–‡æ¡£

- README.md: å®Œæ•´ä½¿ç”¨æŒ‡å—
- PROJECT_OVERVIEW.md: é¡¹ç›®æ¶æ„è¯¦è§£
- ä»£ç å†…æ³¨é‡Š: 1000+è¡Œä¸­æ–‡æ³¨é‡Š

### ğŸ”¬ ç§‘å­¦ä¸¥è°¨æ€§

1. åŸºçº¿æ¨¡å‹: ä½¿ç”¨GitHubæœ€æ–°ç‰ˆæœ¬
   - torchvision.models.resnet50
   - å‚è€ƒåŸè®ºæ–‡å®ç°CBM
2. è¯„ä¼°æŒ‡æ ‡: ä¸¥æ ¼æŒ‰ç…§è®ºæ–‡å®šä¹‰
3. å®éªŒåè®®: å¯é‡å¤çš„éšæœºç§å­å’Œæ•°æ®åˆ’åˆ†

